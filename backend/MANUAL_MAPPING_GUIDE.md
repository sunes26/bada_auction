# 📋 수동 카테고리 매핑 가이드

## ✅ 준비 완료!

매핑 템플릿이 생성되었습니다:
- **파일**: `backend/manual_mapping_template.xlsx`
- **총 카테고리**: 138개
- **우선순위 (★★★ 필수)**: 65개

## 🎯 작업 흐름

### 1단계: 템플릿 열기

```
backend/manual_mapping_template.xlsx
```

Excel에서 열면 다음 컬럼들이 있습니다:

| 컬럼명 | 설명 |
|--------|------|
| ID | 카테고리 ID (내부용) |
| 우선순위 | "★★★ 필수" = 현재 사용 중 |
| 사용빈도 | 얼마나 자주 사용되는지 |
| 폴더명 | 이미지 폴더 이름 |
| 카테고리 전체 경로 | 우리 시스템의 카테고리 |
| 검색 키워드 힌트 | category.xlsx에서 검색할 키워드 |
| **new_code** | 👈 **여기를 채워야 함!** |
| 확인 | 완료 체크용 (O 표시) |

### 2단계: 카테고리 검색 및 매핑

**★★★ 필수** 표시된 65개부터 시작하세요!

#### 방법 A: 검색 스크립트 사용 (권장)

```bash
cd backend
python search_category.py "라면"
python search_category.py "만두"
python search_category.py "카레"
```

#### 방법 B: Excel에서 직접 검색

1. `category.xlsx` 파일 열기
2. Ctrl+F로 검색
3. "전체 통합 문서에서 찾기" 선택
4. 검색 키워드 힌트를 사용해서 찾기

#### 매핑 작업

1. 검색 결과에서 가장 적합한 카테고리 선택
2. 해당 `카테고리코드`를 복사
3. `manual_mapping_template.xlsx`의 `new_code` 컬럼에 붙여넣기
4. `확인` 컬럼에 'O' 표시
5. 저장 (Ctrl+S)

### 3단계: 검증 (Dry Run)

```bash
cd backend
python apply_manual_mapping.py
```

출력 확인:
- 매핑된 개수
- 업데이트 예정 목록
- 에러 없는지 확인

### 4단계: 데이터베이스 적용

```bash
python apply_manual_mapping.py --apply
```

## 📖 매핑 예시

### 예시 1: 간단한 매핑

**우리 카테고리**: `간편식 > 면 > 라면 > 라면`

**검색**:
```bash
python search_category.py "라면"
```

**결과**:
```
1. [6226569] 음료/과자/가공식품 > 라면/면류 > 컵라면
2. [6226567] 음료/과자/가공식품 > 라면/면류 > 봉지라면
```

**선택**: `6226567` (봉지라면이 더 가까움)

**입력**: `new_code` 컬럼에 `6226567` 입력

---

### 예시 2: 정확한 일치가 없는 경우

**우리 카테고리**: `간편식 > 밥류 > 즉석밥 > 흰밥`

**검색**:
```bash
python search_category.py "즉석밥"
```

**결과**:
```
1. [6226813] 음료/과자/가공식품 > 즉석/카레/덮밥 > 죽
2. [6226814] 음료/과자/가공식품 > 즉석/카레/덮밥 > 덮밥
```

**선택**: `6226814` (덮밥이 가장 가까움) 또는 상위 카테고리 찾기

**추가 검색**:
```bash
python search_category.py "밥"
```

더 적합한 카테고리 찾기

---

### 예시 3: 여러 키워드 시도

**우리 카테고리**: `음료 > 커피 > 라떼 > 라떼`

**검색 1**:
```bash
python search_category.py "라떼"
```

결과가 없거나 부적합하면...

**검색 2**:
```bash
python search_category.py "커피"
```

**검색 3**:
```bash
python search_category.py "음료 커피"
```

가장 적합한 것 선택

## 💡 매핑 팁

### 완벽한 일치를 찾을 수 없다면

1. **상위 카테고리 사용**
   - "흰밥" → "밥류" 또는 "즉석식품"

2. **유사한 카테고리 사용**
   - "렌틸콩현미" → "잡곡" 또는 "영양식"

3. **대분류 사용**
   - 정말 없으면 "음료/과자/가공식품" 같은 대분류

### 빠르게 작업하는 방법

1. **터미널 2개 열기**
   - 하나는 검색용
   - 하나는 Excel 작업용

2. **비슷한 카테고리 그룹으로 처리**
   - 라면 관련 전부 → 한 번에 검색
   - 만두 관련 전부 → 한 번에 검색

3. **우선순위 먼저**
   - ★★★ 필수 65개만 먼저 완료
   - 나머지는 나중에

### 일반적인 패턴

| 우리 카테고리 | category.xlsx에서 찾을 곳 |
|--------------|------------------------|
| 간편식 > ... | 음료/과자/가공식품 > ... |
| 냉동식 > ... | 음료/과자/가공식품 > ... |
| 음료 > ... | 음료/과자/가공식품 > 음료 |
| 헤어/바디 > ... | 화장품/헤어/향수 > ... |
| 세제/세정제 > ... | 세제/청소/생활용품 > ... |

## 🔍 검색 키워드 가이드

엑셀의 "검색 키워드 힌트" 컬럼을 활용하세요:

- **첫 번째 키워드**: 마지막 레벨 (가장 구체적)
- **두 번째 키워드**: 마지막 두 레벨 조합
- **세 번째 키워드**: 대분류

모두 시도해보고 가장 적합한 결과 선택

## ⚠️ 주의사항

### 하지 말아야 할 것

❌ new_code에 텍스트 입력 (숫자만!)
❌ 같은 코드를 여러 카테고리에 중복 사용 (가능하면 피하기)
❌ 완전히 관련 없는 카테고리 매핑

### 해야 할 것

✅ 가장 유사한 카테고리 선택
✅ 여러 키워드로 검색 시도
✅ 정확한 일치가 없으면 상위 카테고리
✅ 매핑 완료 후 '확인' 컬럼에 'O' 표시
✅ 자주 저장 (Ctrl+S)

## 📊 진행 상황 추적

### 현재 상태

- **총**: 138개
- **우선순위 (필수)**: 65개
- **완료**: 0개

### 목표

- **최소 목표**: 우선순위 65개 완료
- **권장 목표**: 100개 이상 완료
- **완벽 목표**: 138개 전부 완료

## 🆘 문제 해결

### Q: 검색해도 결과가 없어요
A: 다른 키워드로 시도하거나, 상위 카테고리명으로 검색

### Q: 여러 개가 나왔는데 어떤 걸 선택하죠?
A: 카테고리 경로가 가장 유사한 것 선택

### Q: 정말 비슷한 게 없어요
A: 대분류 카테고리 사용 (예: "음료/과자/가공식품")

### Q: 실수로 잘못 입력했어요
A: 그냥 수정하면 됩니다. Apply 전까지는 언제든 수정 가능

### Q: 일부만 매핑하고 적용할 수 있나요?
A: 네! new_code를 채운 것만 적용됩니다. 나중에 추가 가능

## 🚀 다음 단계

매핑 완료 후:

1. **검증**:
   ```bash
   python apply_manual_mapping.py
   ```

2. **적용**:
   ```bash
   python apply_manual_mapping.py --apply
   ```

3. **테스트**:
   - PlayAuto 상품 등록 테스트
   - 카테고리 표시 확인

4. **Railway 배포**:
   ```bash
   git add backend/manual_mapping_template.xlsx
   git commit -m "Add manual category mapping"
   git push
   ```

---

**화이팅! 천천히 하나씩 하면 됩니다!** 🎉

우선순위 65개만 먼저 완료하면 현재 사용 중인 상품은 모두 정상 작동합니다.

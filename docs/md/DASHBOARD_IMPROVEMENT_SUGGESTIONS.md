# 플레이오토 API 연동 후 대시보드 개선 제안

## 현재 상태 분석

### ✅ 잘 구현된 기능
- 주문 조회 및 동기화
- 택배사 목록 조회 (165개)
- 송장 업로드 기능
- 기본 통계 및 로그
- 설정 관리

### ⚠️ 개선이 필요한 부분
아래 항목들은 플레이오토 API를 활용하여 대시보드의 사용성과 자동화를 크게 개선할 수 있습니다.

---

## 🎯 우선순위 높음 (즉시 개선 권장)

### 1. 실시간 주문 모니터링 대시보드

**현재 문제:**
- 수동으로 새로고침해야 새 주문을 확인 가능
- 신규 주문 알림 없음
- 주문 상태 변경 실시간 감지 불가

**개선안:**
```typescript
// 실시간 주문 모니터링 위젯
<OrderMonitorWidget>
  - 🔴 실시간 신규 주문 알림 (30초마다 자동 체크)
  - 🟡 처리 대기 주문 카운트 (상태별 뱃지)
  - 🟢 오늘의 주문 트렌드 그래프
  - 📊 시간대별 주문 분포 차트
</OrderMonitorWidget>
```

**구현 방법:**
- WebSocket 또는 Polling (30초 간격)
- 신규 주문 발생 시 브라우저 알림
- 주문 상태별 실시간 카운트 업데이트

**예상 효과:**
- 주문 누락 방지
- 빠른 주문 처리 가능
- 업무 효율 30% 향상

---

### 2. 마켓별 통합 대시보드

**현재 문제:**
- 전체 주문만 보이고 마켓별 분리 없음
- 어느 마켓에서 주문이 많은지 한눈에 파악 불가
- 마켓별 수익성 비교 어려움

**개선안:**
```typescript
// 마켓별 통계 카드
<MarketStatsGrid>
  {markets.map(market => (
    <MarketCard key={market}>
      - 쿠팡: 15건 (₩450,000) ⬆️ +20%
      - 네이버: 8건 (₩240,000) ⬇️ -5%
      - 11번가: 5건 (₩150,000) ➡️ 0%
      - SSG: 3건 (₩90,000) ⬆️ +50%
    </MarketCard>
  ))}
</MarketStatsGrid>

// 마켓별 필터 및 드릴다운
<MarketFilter>
  - 클릭 시 해당 마켓 주문만 표시
  - 마켓별 평균 주문금액, 처리시간 표시
</MarketFilter>
```

**API 추가 필요:**
```python
@router.get("/stats/by-market")
async def get_market_stats(days: int = 7):
    """마켓별 통계 조회"""
    # 각 마켓별 주문수, 금액, 전일 대비 증감률
```

**예상 효과:**
- 마켓별 성과 한눈에 파악
- 효율적인 마케팅 전략 수립 가능
- 주력 마켓 집중 관리

---

### 3. 주문 자동 매칭 시스템

**현재 문제:**
- 플레이오토 주문과 소싱할 상품을 수동으로 연결
- 상품 URL을 일일이 찾아야 함
- 반복 주문 시 매번 같은 작업

**개선안:**
```typescript
// 자동 매칭 시스템
<AutoMatchingSystem>
  1. 주문 상품명 분석 (AI/키워드 매칭)
  2. 소싱처(SSG, 11번가 등)에서 유사 상품 자동 검색
  3. 가격, 재고 실시간 확인
  4. 수익률 자동 계산
  5. 원클릭 매칭 또는 자동 매칭
</AutoMatchingSystem>

// 상품 매칭 히스토리 저장
<ProductMappingDB>
  - "갤럭시 버즈 프로" → SSG 상품코드 12345
  - 다음 동일 주문 시 자동 매칭
</ProductMappingDB>
```

**DB 스키마 추가:**
```sql
CREATE TABLE product_mappings (
  id INTEGER PRIMARY KEY,
  order_product_name TEXT,
  source TEXT,  -- ssg, 11st 등
  source_product_id TEXT,
  source_product_url TEXT,
  confidence_score REAL,  -- 매칭 신뢰도
  created_at TIMESTAMP,
  last_used_at TIMESTAMP
);
```

**예상 효과:**
- 주문 처리 시간 80% 단축
- 반복 작업 자동화
- 실수로 인한 손실 방지

---

### 4. 자동 송장 업로드 스케줄러 UI

**현재 문제:**
- 송장 업로드를 수동으로 트리거해야 함
- 업로드 성공/실패 상태 실시간 확인 불가
- 실패 시 재시도 기능 없음

**개선안:**
```typescript
// 자동 업로드 스케줄러 설정
<TrackingSchedulerUI>
  📅 자동 업로드 설정
  - 매일 오후 5시 자동 실행 ✅
  - 실패 시 3회 재시도 ✅
  - 성공 시 Slack/Discord 알림 ✅

  📊 실시간 업로드 현황
  - 진행 중: 15/20건 (75%)
  - 성공: 12건
  - 실패: 3건 (에러 상세보기)
  - 대기: 5건

  🔄 수동 재시도
  - 실패 건만 선택하여 재업로드
</TrackingSchedulerUI>
```

**백엔드 개선:**
```python
@router.post("/upload-tracking/schedule")
async def set_upload_schedule(
    enabled: bool,
    schedule_time: str,  # "17:00"
    retry_count: int = 3,
    notify_slack: bool = False,
    notify_discord: bool = False
):
    """송장 자동 업로드 스케줄 설정"""
```

**예상 효과:**
- 송장 업로드 누락 방지
- 야간 자동 처리로 업무 시간 절약
- 에러 발생 시 즉시 대응 가능

---

## 🎯 우선순위 중간 (유용하지만 선택적)

### 5. 주문 처리 워크플로우 자동화

**개선안:**
```typescript
// 주문 자동 처리 파이프라인
<OrderWorkflow>
  1. 신규 주문 감지 (플레이오토 API)
     ↓
  2. 상품 자동 매칭 (AI/DB)
     ↓
  3. 재고 확인 (소싱처 크롤링)
     ↓
  4. 주문 접수 (자동 또는 승인 대기)
     ↓
  5. 송장 자동 업로드
     ↓
  6. 완료 알림
</OrderWorkflow>

// UI에서 단계별 진행 상황 표시
<WorkflowProgress>
  주문 #12345
  ✅ 주문 감지
  ✅ 상품 매칭 (신뢰도 95%)
  🔄 재고 확인 중...
  ⏸️ 주문 접수 대기
  ⏸️ 송장 업로드 대기
</WorkflowProgress>
```

**예상 효과:**
- 완전 자동화 가능
- 사람 개입 최소화
- 처리 속도 대폭 향상

---

### 6. 배송 추적 통합 대시보드

**현재 문제:**
- 배송 상태를 플레이오토에서만 확인 가능
- 대시보드에서 배송 현황 파악 불가

**개선안:**
```typescript
// 배송 현황 위젯
<DeliveryTracking>
  📦 배송 현황
  - 배송 중: 25건
  - 배송 완료: 150건
  - 배송 지연: 3건 ⚠️

  🚚 택배사별 현황
  - CJ대한통운: 15건
  - 한진택배: 8건
  - 로젠택배: 2건

  ⚠️ 주의 필요
  - 주문 #12345: 3일째 미배송
  - 주문 #12346: 고객 연락 필요
</DeliveryTracking>
```

**API 추가:**
```python
@router.get("/delivery-status")
async def get_delivery_status():
    """플레이오토에서 배송 현황 조회"""
```

**예상 효과:**
- 배송 지연 즉시 파악
- 고객 문의 선제 대응
- CS 품질 향상

---

### 7. 수익성 분석 대시보드

**현재 문제:**
- 주문별 수익률 계산 수동
- 전체 수익성 파악 어려움
- 마진이 낮은 상품 파악 불가

**개선안:**
```typescript
// 수익성 분석 위젯
<ProfitAnalysis>
  💰 이번 주 수익 분석
  - 총 매출: ₩2,500,000
  - 총 소싱 비용: ₩1,800,000
  - 순이익: ₩700,000 (28% 마진)

  📊 상위/하위 상품
  - 최고 수익: 갤럭시 버즈 (45% 마진)
  - 최저 수익: USB 케이블 (5% 마진) ⚠️

  📈 트렌드
  - 전주 대비 수익률 +3%
  - 평균 주문 금액 증가 추세
</ProfitAnalysis>
```

**계산 로직 추가:**
```python
@router.get("/profit-analysis")
async def analyze_profit(days: int = 7):
    """주문별 수익률 분석"""
    # selling_price - sourcing_price - fees
```

**예상 효과:**
- 데이터 기반 의사결정
- 수익성 낮은 상품 제외
- 마진 개선 전략 수립

---

### 8. 에러 알림 및 자동 복구 시스템

**현재 문제:**
- API 오류 발생 시 눈치채기 어려움
- 동기화 실패 시 수동 확인 필요

**개선안:**
```typescript
// 에러 모니터링 위젯
<ErrorMonitoring>
  🚨 최근 에러 (24시간)
  - API 타임아웃: 3건 (자동 재시도 완료)
  - 인증 실패: 0건
  - 주문 동기화 실패: 1건 ⚠️

  🔔 알림 설정
  - Discord 웹훅 연동 ✅
  - Slack 알림 ✅
  - 이메일 알림 ⏸️

  🔄 자동 복구
  - 3회 재시도 후 알림
  - 토큰 만료 시 자동 갱신
</ErrorMonitoring>
```

**예상 효과:**
- 시스템 안정성 향상
- 장애 조기 발견
- 다운타임 최소화

---

## 🎯 우선순위 낮음 (참고용)

### 9. 고객 관리 기능
- 단골 고객 자동 감지
- 고객별 주문 히스토리
- VIP 고객 우선 처리

### 10. 재고 연동 시스템
- 소싱처 재고 실시간 모니터링
- 품절 시 자동 알림
- 대체 상품 추천

---

## 📋 구현 우선순위 제안

### 1단계 (즉시 구현 권장)
1. ✅ **실시간 주문 모니터링** - 가장 실용적
2. ✅ **마켓별 통합 대시보드** - 데이터 가시성 향상
3. ✅ **자동 송장 업로드 스케줄러** - 자동화 핵심

### 2단계 (1달 내)
4. 🔄 **주문 자동 매칭** - 가장 시간 절약
5. 🔄 **에러 알림 시스템** - 안정성 향상

### 3단계 (2-3달 내)
6. 📊 **수익성 분석** - 비즈니스 인사이트
7. 🚚 **배송 추적 통합** - CS 향상
8. 🤖 **워크플로우 자동화** - 완전 자동화

---

## 💡 추가 제안

### A. 모바일 반응형 개선
현재 대시보드가 모바일에서 최적화되어 있지 않다면:
- 주문 알림을 모바일에서도 받을 수 있게
- 간단한 주문 승인/거부는 스마트폰에서도 가능하게

### B. 데이터 백업 자동화
- 주문 데이터 자동 백업 (일 1회)
- 백업 복구 테스트 기능
- 클라우드 동기화

### C. 성능 최적화
- 주문 목록 가상 스크롤 (1000+ 주문 시)
- 이미지 레이지 로딩
- API 응답 캐싱

---

## 🎯 결론 및 권장사항

**즉시 시작하면 좋을 3가지:**

1. **실시간 주문 모니터링** (난이도: ⭐⭐☆☆☆)
   - 30분이면 구현 가능
   - 효과가 즉시 체감됨

2. **마켓별 통합 대시보드** (난이도: ⭐⭐⭐☆☆)
   - 백엔드 API 1개 추가
   - 프론트엔드 차트 컴포넌트
   - 1-2시간 작업

3. **자동 송장 업로드 스케줄러** (난이도: ⭐⭐⭐⭐☆)
   - 가장 큰 업무 시간 절약
   - 스케줄러 + UI 통합 필요
   - 3-4시간 작업

이 3가지만 구현해도 **업무 효율이 50% 이상 향상**될 것으로 예상됩니다.

---

**작성일:** 2026-01-28
**작성자:** Claude Sonnet 4.5
